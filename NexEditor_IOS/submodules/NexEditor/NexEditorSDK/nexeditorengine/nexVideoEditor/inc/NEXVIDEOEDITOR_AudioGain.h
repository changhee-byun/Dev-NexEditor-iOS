/******************************************************************************
* File Name   :	NEXVIDEOEDITOR_AudioGain.h
* Description :	
*******************************************************************************

Nextreaming Confidential Proprietary
Copyright (C) 2006 Nextreaming Corporation
All rights are reserved by Nextreaming Corporation

Revision History:
Author	Date		Description of Changes
-------------------------------------------------------------------------------
kyebeom song		2013/2/19	Draft.
-----------------------------------------------------------------------------*/

#ifndef _NEXVIDEOEDITOR_AUDIOGAIN__H_
#define _NEXVIDEOEDITOR_AUDIOGAIN__H_

#define MAX_VOLUME 200

enum {
    zeroDBGain = (1L << 30)
};
/*
// Log scale
// Q30
static const unsigned int VolumeToGain[MAX_VOLUME + 1] = { 0,
	107374183   ,151850025  ,185977540  ,214748365  ,240095971  ,263011959  ,284085384  ,303700050  ,322122548  ,339546979  ,
	356119876   ,371955079  ,387143121  ,401757403  ,415858421  ,429496730  ,442715096  ,455550075  ,468033211  ,480191942  ,
	492050319   ,503629558  ,514948489  ,526023917  ,536870913  ,547503052  ,557932619  ,568170768  ,578227669  ,588112618  ,
	597834147   ,607400100  ,616817718  ,626093693  ,635234230  ,644245095  ,653131654  ,661898914  ,670551555  ,679093957  ,
	687530230   ,695864234  ,704099601  ,712239751  ,720287913  ,728247137  ,736120308  ,743910158  ,751619277  ,759250125  ,
	766805039   ,774286241  ,781695848  ,789035876  ,796308250  ,803514806  ,810657300  ,817737411  ,824756745  ,831716841  ,
	838619174   ,845465158  ,852256152  ,858993460  ,865678335  ,872311982  ,878895562  ,885430191  ,891916946  ,898356863  ,
	904750943   ,911100150  ,917405417  ,923667643  ,929887697  ,936066421  ,942204627  ,948303103  ,954362609  ,960383884  ,
	966367642   ,972314576  ,978225357  ,984100638  ,989941049  ,995747204  ,1001519700 ,1007259115 ,1012966011 ,1018640935 ,
	1024284419  ,1029896978 ,1035479116 ,1041031323 ,1046554074 ,1052047834 ,1057513055 ,1062950175 ,1068359626 ,1073741825 ,//100

	1089728935  ,1105484869 ,1121019376 ,1136341536 ,1151459826 ,1166382174 ,1181116007 ,1195668293 ,1210045583 ,1224254041 ,
	1238299480  ,1252187385 ,1265922941 ,1279511054 ,1292956373 ,1306263307 ,1319436044 ,1332478562 ,1345394650 ,1358187914 ,
	1370861792  ,1383419567 ,1395864372 ,1408199201 ,1420426920 ,1432550271 ,1444571883 ,1456494274 ,1468319861 ,1480050965 ,
	1491689815  ,1503238554 ,1514699243 ,1526073865 ,1537364331 ,1548572482 ,1559700092 ,1570748873 ,1581720477 ,1592616499 ,
	1603438479  ,1614187908 ,1624866224 ,1635474822 ,1646015048 ,1656488208 ,1666895566 ,1677238347 ,1687517739 ,1697734892 ,
	1707890924  ,1717986919 ,1728023929 ,1738002976 ,1747925052 ,1757791124 ,1767602127 ,1777358975 ,1787062553 ,1796713726 ,
	1806313334  ,1815862193 ,1825361101 ,1834810834 ,1844212146 ,1853565776 ,1862872441 ,1872132841 ,1881347661 ,1890517566 ,
	1899643206  ,1908725218 ,1917764220 ,1926760817 ,1935715602 ,1944629152 ,1953502030 ,1962334790 ,1971127970 ,1979882097 ,
	1988597688  ,1997275246 ,2005915266 ,2014518230 ,2023084611 ,2031614872 ,2040109466 ,2048568837 ,2056993419 ,2065383637 ,
	2073739910  ,2082062645 ,2090352244 ,2098609099 ,2106833594 ,2115026109 ,2123187011 ,2131316666 ,2139415428 ,2147483647 //200
};
*/

// Linear Scale
// Q30
 static const unsigned int VolumeToGain[MAX_VOLUME + 1] = { 0,

// x^(15/11) ( 0 < x<= 100)
// 10737418.22*(x-100)+1073741825 ( 100 < x <= 200)
2011996 , 5177530 , 9000094 , 13323491 , 18062092 , 23160210 , 28578114 , 34285737 , 40259366 , 46479720 , 
52930754 , 59598857 , 66472315 , 73540912 , 80795645 , 88228509 , 95832327 , 103600625 , 111527522 , 119607649 , 
127836083 , 136208285 , 144720061 , 153367515 , 162147021 , 171055189 , 180088849 , 189245019 , 198520898 , 207913840 , 
217421346 , 227041050 , 236770707 , 246608184 , 256551452 , 266598576 , 276747712 , 286997096 , 297345040 , 307789928 , 
318330211 , 328964401 , 339691068 , 350508839 , 361416390 , 372412446 , 383495777 , 394665197 , 405919560 , 417257759 , 
     
428678723 , 440181415 , 451764832 , 463428000 , 475169977 , 486989847 , 498886723 , 510859742 , 522908066 , 535030879 , 
547227391 , 559496828 , 571838441 , 584251498 , 596735288 , 609289114 , 621912301 , 634604187 , 647364128 , 660191495 , 
673085672 , 686046060 , 699072072 , 712163134 , 725318686 , 738538178 , 751821075 , 765166851 , 778574991 , 792044993 , 
805576362 , 819168616 , 832821282 , 846533894 , 860305998 , 874137148 , 888026905 , 901974840 , 915980531 , 930043565 , 
944163535 , 958340043 , 972572696 , 986861109 , 1001204905 , 1015603711 , 1030057162 , 1044564899 , 1059126569 , 1073741825 , // 100
     
1084479243 , 1095216661 , 1105954080 , 1116691498 , 1127428916 , 1138166334 , 1148903753 , 1159641171 , 1170378589 , 1181116007 , 
1191853425 , 1202590844 , 1213328262 , 1224065680 , 1234803098 , 1245540517 , 1256277935 , 1267015353 , 1277752771 , 1288490189 , 
1299227608 , 1309965026 , 1320702444 , 1331439862 , 1342177281 , 1352914699 , 1363652117 , 1374389535 , 1385126953 , 1395864372 , 
1406601790 , 1417339208 , 1428076626 , 1438814044 , 1449551463 , 1460288881 , 1471026299 , 1481763717 , 1492501136 , 1503238554 , 
1513975972 , 1524713390 , 1535450808 , 1546188227 , 1556925645 , 1567663063 , 1578400481 , 1589137900 , 1599875318 , 1610612736 , 
     
1621350154 , 1632087572 , 1642824991 , 1653562409 , 1664299827 , 1675037245 , 1685774664 , 1696512082 , 1707249500 , 1717986918 , 
1728724336 , 1739461755 , 1750199173 , 1760936591 , 1771674009 , 1782411428 , 1793148846 , 1803886264 , 1814623682 , 1825361100 , 
1836098519 , 1846835937 , 1857573355 , 1868310773 , 1879048192 , 1889785610 , 1900523028 , 1911260446 , 1921997864 , 1932735283 , 
1943472701 , 1954210119 , 1964947537 , 1975684955 , 1986422374 , 1997159792 , 2007897210 , 2018634628 , 2029372047 , 2040109465 , 
2050846883 , 2061584301 , 2072321719 , 2083059138 , 2093796556 , 2104533974 , 2115271392 , 2126008811 , 2136746229 , 2147483647 ,  // 200

 };

unsigned int calcVolume(unsigned int uiCTS, unsigned int uiStartCTS, unsigned int uiEndCTS, unsigned int uiStartVolume, unsigned int uiEndVolume);
void processVolume(int iChannels, short* pPCM, int iPCMCount, int iStartVolume, int iEndVolume);
void gainFeedMono(short *pnSignal0, int nSamples, int fromGain, int toGain);		// gain Range 0 ~ 200
void gainFeedStereo(short *pnSignal0, int nSamples, int fromGain, int toGain);		// gain Range 0 ~ 200
void gainFeedMulti(short *pnSignal0, int nChannels, int nSamples, int fromGain, int toGain);		// gain Range 0 ~ 200
unsigned int getGain(int nVolume);

#endif // _NEXVIDEOEDITOR_AUDIOGAIN__H_

