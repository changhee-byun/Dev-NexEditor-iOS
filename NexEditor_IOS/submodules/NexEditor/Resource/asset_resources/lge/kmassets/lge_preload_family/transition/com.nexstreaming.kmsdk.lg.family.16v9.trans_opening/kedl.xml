<effect 
	id="com.nexstreaming.kmsdk.lg.family.16v9.openingtrans"
	type="transition" 
	minduration="1500" 
	maxduration="3000" 
	effectoffset="100" 
	effectoverlap="100"
	cycleTime="800"
	name="Family Opening Trans">


	<!-- COMMON VIDEO RESOURCE -->
	<texture id="video1" video="1" />
	<texture id="video2" video="2" />

	<texture id="texture_bk_blue" 			src="bk_cyan.png" />
	<texture id="texture_bk_light_yellow" 	src="bk_large_orange.png" />
	<texture id="texture_bk_pink_yellow" 	src="bk_cyan2.png" />
	<texture id="texture_bk_green" 			src="bk_green.png" />
	<texture id="texture_bk_large_orange" 	src="bk_large_orange.png" />
	<texture id="texture_bk_rainbow" 		src="bk_normal.png" />
	<texture id="texture_bk_blue_cyan" 		src="bk_cyan.png" />
	<texture id="texture_bk_small" 			src="bk_normal.png" />
	<texture id="texture_bk_normal" 		src="bk_normal.png" />
    

<!--
  <texture id="texture_2" src="bk_normal.png" />
  <texture id="texture_3" src="bk_green.png" />
  <texture id="texture_4" src="bk_cyan.png" />
  <texture id="texture_5" src="bk_large_orange.png" />
  <texture id="texture_6" src="bk_cyan2.png" />
  <texture id="texture_7" src="bk_green.png" />
  <texture id="texture_8" src="bk_cyan2.png" />
  <texture id="texture_9" src="bk_normal.png" />
  <texture id="texture_10" src="bk_large_orange.png" />
  <texture id="texture_11" src="bk_normal.png" />
  <texture id="texture_12" src="bk_cyan.png" />
  <texture id="texture_13" src="bk_cyan.png" />
  <texture id="texture_14" src="bk_light_yellow.png" />
  <texture id="texture_15" src="bk_cyan.png" />
  <texture id="texture_16" src="bk_normal.png" />
  <texture id="texture_17" src="bk_normal.png" />
  <texture id="texture_18" src="bk_cyan2.png" />
  <texture id="texture_19" src="bk_large_orange.png" />

-->




    <animatedvalue id="r">
        <keyframe value="720" />
        <keyframe value="0" />
        <keyframe value="720" />
    </animatedvalue>
    <animatedvalue id="t">
        <keyframe value="0" />
        <keyframe value="1" />
    </animatedvalue>

	<!-- RIGHT TO LEFT  START-->
	
	<animatedvalue id="falling" timingfunction="ease_in">
		<keyframe value="1" />
		<keyframe value="8" />
	</animatedvalue>

	<animatedvalue id="fade">
		<part type="in">
			<keyframe value="0" />
			<keyframe value="1" />
		</part>
		<part type="mid">
			<keyframe value="1" />
		</part>
		<part type="out">
			<keyframe value="1" />
			<keyframe value="0" />
		</part>
	</animatedvalue>	
	
	
<!-- OPENING TRANSITION -->
	
  <animatedvalue id="anim_right_to_left_video1" timingfunction="linear">
    <keyframe time="0" value="0" />
    <keyframe time="1" value="1" />
  </animatedvalue>	
	<animatedvalue id="btt_falling" timingfunction="ease_in">
		<keyframe value="16" />
		<keyframe value="1" />
	</animatedvalue>
	<animatedvalue id="btt_fade">
		<keyframe time="0" value="0" />
		<keyframe time="0.1" value="1" />
		<keyframe time="0.7" value="1" />
		<keyframe time="1" value="0" />
	</animatedvalue>
  <animatedvalue id="anim_scale_bokehs1" timingfunction="linear">
		<keyframe time="0" value="1" />
		<keyframe time="1" value="3" />
  </animatedvalue>
  <animatedvalue id="anim_scale_bokehs2" timingfunction="linear">
		<keyframe time="0" value="1" />
		<keyframe time="1" value="6" />
  </animatedvalue>
  <animatedvalue id="anim_scale_bokehs3" timingfunction="linear">
		<keyframe time="0" value="1" />
		<keyframe time="1" value="8" />
  </animatedvalue>
    <animatedvalue id="wipe_bottom_to_up" timingfunction="linear">
        <keyframe value="-640 360 640 360" />
        <keyframe value="-640 -360 640 360" />
    </animatedvalue>
    <animatedvalue id="wipe_bottom_to_up" timingfunction="linear">
        <keyframe value="-640 360 640 360" />
        <keyframe value="-640 -360 640 360" />
    </animatedvalue>
  <animatedvalue id="anim_bk_blue" timingfunction="linear" scope="whole">
    <keyframe time="0" value="270 653" />
    <keyframe time="1" value="270 -300" />

  </animatedvalue>
  <animatedvalue id="anim_bk_light_yellow" timingfunction="linear" scope="whole">
    <keyframe time="0" value="356 586" />
    <keyframe time="1" value="356 -300" />

  </animatedvalue>
  <animatedvalue id="anim_bk_pink_yellow" timingfunction="linear" scope="whole">
    <keyframe time="0" value="193 563" />
    <keyframe time="1" value="193 -300" />
  </animatedvalue>
  <animatedvalue id="anim_bk_blue_cyan" timingfunction="linear" scope="whole">
    <keyframe time="0" value="415 414" />
    <keyframe time="1" value="415 -300" />
  </animatedvalue>
  <animatedvalue id="anim_bk_green" timingfunction="linear" scope="whole">
    <keyframe time="0" value="573 567" />
    <keyframe time="1" value="573 -300" />
  </animatedvalue>
  <animatedvalue id="anim_bk_rainbow" timingfunction="linear" scope="whole">
    <keyframe time="0" value="714 523" />
    <keyframe time="1" value="714 -300" />
  </animatedvalue>
  <animatedvalue id="anim_bk_large_orange" timingfunction="linear" scope="whole">
    <keyframe time="0" value="1055 775" />
    <keyframe time="1" value="1055 -300" />
  </animatedvalue>
  <animatedvalue id="anim_bk_small1" timingfunction="linear" scope="whole">
    <keyframe time="0" value="277 510" />
    <keyframe time="1" value="277 -300" />
  </animatedvalue>
  <animatedvalue id="anim_bk_small2" timingfunction="linear" scope="whole">
    <keyframe time="0" value="676 606" />
    <keyframe time="1" value="676 -300" />
  </animatedvalue>
  <animatedvalue id="anim_bk_small3" timingfunction="linear" scope="whole">
    <keyframe time="0" value="887 449" />
    <keyframe time="1" value="887 -300" />
  </animatedvalue>
  <animatedvalue id="anim_bk_normal" timingfunction="linear" scope="whole">
	<keyframe time="0" value="814 749" />
	<keyframe time="1" value="814 -300" />
  </animatedvalue>

  <animatedvalue id="alpha_opening_1" timingfunction="linear" scope="whole">
	<keyframe time="0" value="0" />
	<keyframe time="0.1" value="0.8" />
	<keyframe time="0.7" value="1" />
	<keyframe time="1" value="0" />
  </animatedvalue>

  <animatedvalue id="alpha_opening_2" timingfunction="linear" scope="whole">
	<keyframe time="0" value="0" />
	<keyframe time="0.1" value="0.5" />
	<keyframe time="0.4" value="0.8" />
	<keyframe time="1" value="0" />
  </animatedvalue>

  <animatedvalue id="alpha_opening_3" timingfunction="linear" scope="whole">
	<keyframe time="0" value="0" />
	<keyframe time="0.3" value="0.6" />
	<keyframe time="0.9" value="0.7" />
	<keyframe time="1" value="0" />
  </animatedvalue>

  <animatedvalue id="alpha_opening_4" timingfunction="linear" scope="whole">
	<keyframe time="0" value="0" />
	<keyframe time="0.2" value="0.6" />
	<keyframe time="0.7" value="0.3" />
	<keyframe time="1" value="0" />
  </animatedvalue>

  <animatedvalue id="alpha_opening)_5" timingfunction="linear" scope="whole">
	<keyframe time="0" value="0" />
	<keyframe time="0.35" value="0.8" />
	<keyframe time="0.75" value="0.2" />
	<keyframe time="1" value="0" />
  </animatedvalue>

  <animatedvalue id="alpha_opening_6" timingfunction="linear" scope="whole">
	<keyframe time="0" value="0" />
	<keyframe time="0.21" value="0.45" />
	<keyframe time="0.65" value="0" />
	<keyframe time="1" value="0" />
  </animatedvalue>

  <animatedvalue id="alpha_opening_7" timingfunction="linear" scope="whole">
	<keyframe time="0" value="0" />
	<keyframe time="0.15" value="0.75" />
	<keyframe time="0.85" value="0.1" />
	<keyframe time="1" value="0" />
  </animatedvalue>

  <animatedvalue id="alpha_opening_8" timingfunction="linear" scope="whole">
	<keyframe time="0" value="0" />
	<keyframe time="0.3" value="0.45" />
	<keyframe time="0.75" value="0" />
	<keyframe time="1" value="0" />
  </animatedvalue>

  <animatedvalue id="alpha_opening_9" timingfunction="linear" scope="whole">
	<keyframe time="0" value="0" />
	<keyframe time="0.1" value="0.9" />
	<keyframe time="0.7" value="0" />
	<keyframe time="1" value="0" />
  </animatedvalue>

  <animatedvalue id="alpha_opening_10" timingfunction="linear" scope="whole">
	<keyframe time="0" value="0" />
	<keyframe time="0.2" value="0.85" />
	<keyframe time="0.8" value="0" />
	<keyframe time="1" value="0" />
  </animatedvalue>



	<function id="glowfunc" type="simplexfractal" outputbias="0.5" outputscale="0.5" octaves="4" />
	<function id="glowfuncb" type="simplexfractal" outputbias="0.5" outputscale="0.5" octaves="5" />
	<function id="glowfuncc" type="simplexfractal" outputbias="0.5" outputscale="0.5" octaves="7" />

	<animatedvalue id="t" scope="whole" timingfunction="linear">
		<keyframe value="0" />
		<keyframe value="20" />
	</animatedvalue>


  <texture id="tex_mask" src="mask_gradient_c.png" />

  <animatedvalue id="slide">
    <keyframe value="0 -2" />
    <keyframe value="0 2" />
  </animatedvalue>


<!-- OPENING TRANSITION END -->


	  <projection type="perspective" fov="45" aspect="1.777777" near="0.01" far="60000">
		<scale y="-1">
		  <translate offset="-640 -360 -870">

			<translate offset="640 360">
			  <rect bounds="-640 -360 640 360" texture="@video1" />
			  <translate maskoffset="@slide">
				<translate maskoffset="0.5 0.5">
				  <scale type="mask" x="0" y="2">
					<translate maskoffset="-0.5 -0.5">
					  <rect bounds="-640 -360 640 360" texture="@video2" mask="@tex_mask" />
					</translate>
				  </scale>
				</translate>
			  </translate>
			</translate>
        
				<!-- OPENING -->
				<translate offset="@anim_bk_blue">
					<scale uniform="@anim_scale_bokehs1">
						<style alpha="@alpha_opening_1">
							<rect bounds="-75 -75 75 75" texture="@texture_bk_blue" />
						</style>
					</scale>
				</translate>
				<translate offset="@anim_bk_light_yellow">
					<scale uniform="@anim_scale_bokehs2">
						<style alpha="@alpha_opening_1">
						  <rect bounds="-100 -100 100 100" texture="@texture_bk_light_yellow" />
						</style>
					</scale>
				</translate>
				<translate offset="@anim_bk_pink_yellow">
					<scale uniform="@anim_scale_bokehs1">
						<style alpha="@alpha_opening_2">
							<rect bounds="-250 -250 250 250" texture="@texture_bk_pink_yellow" />
						</style>
					</scale>
				</translate>
				<translate offset="@anim_bk_blue_cyan">
					<scale uniform="@anim_scale_bokehs2">
						<style alpha="@alpha_opening_3">
						  <rect bounds="-185 -185 185 185" texture="@texture_bk_blue_cyan" />
						</style>
					</scale>
				</translate>
		
				<translate offset="@anim_bk_green">
					<scale uniform="@anim_scale_bokehs1">
						<style alpha="@alpha_opening_4">
						  <rect bounds="-115 -115 115 115" texture="@texture_bk_green" />
						</style>
					</scale>
				</translate>

				<translate offset="@anim_bk_rainbow">
					<scale uniform="@anim_scale_bokehs2">
						<style alpha="@alpha_opening_5">
						  <rect bounds="-150 -150 150 150" texture="@texture_bk_blue_cyan" />
						</style>
					</scale>
				</translate>
<!--
				<translate offset="@anim_bk_large_orange">
					<style alpha="@alpha_opening">
					  <rect bounds="-170 -170 170 170" texture="@texture_bk_large_orange" />
					</style>
				</translate>

-->
				<translate offset="@anim_bk_small1">
					<scale uniform="@anim_scale_bokehs1">
						<style alpha="@alpha_opening_6">
						  <rect bounds="-50 -50 50 50" texture="@texture_bk_small" />
						</style>
					</scale>
				</translate>
				<translate offset="@anim_bk_small2">
					<scale uniform="@anim_scale_bokehs2">
						<style alpha="@alpha_opening_7">
						  <rect bounds="-75 -75 75 75" texture="@texture_bk_small" />
						</style>
					</scale>
				</translate>
				<translate offset="@anim_bk_small3">
					<scale uniform="@anim_scale_bokehs1">
						<style alpha="@alpha_opening_8">
						  <rect bounds="-116.500 -117 116.500 117" texture="@texture_bk_small" />
						</style>
					</scale>
				</translate>
				<translate offset="@anim_bk_normal">
					<scale uniform="@anim_scale_bokehs2">
						<style alpha="@alpha_opening_9">
						  <rect bounds="-65 -65 65 65" texture="@texture_bk_normal" />
						</style>
					</scale>
				</translate>
			</translate>
			
			<!-- BOCHES	-->
			<style alpha="@btt_fade">
			<translate offset="0 0 -7">
				<translate offset="0 -5 0" repeat="4">
				<translate offset="0 @btt_falling -7">
					<sequence id="r" type="randmix" count="3" start="-5 -5 .2" end="7 0 1" seed="845354814">
						<translate offset="@r.x @r.y @r.z*12">
							<scale uniform="@anim_scale_bokehs3">
								<style alpha="@glowfuncb(@r.x @r.y @t)">
									<rect bounds="-0.3 -0.3 0.3 0.3" texture="@texture_bk_small" />
								</style>
							</scale>
						</translate>
					</sequence>

					<sequence id="r" type="randmix" count="2" start="-5 -5 .2" end="7 0 1" seed="674567450">
						<translate offset="@r.x @r.y @r.z*12">
							<scale uniform="@anim_scale_bokehs1">						
								<style alpha="@glowfunc(@r.x @r.y @t)">
									<rect bounds="-0.3 -0.3 0.3 0.3" texture="@texture_bk_pink_yellow" />
								</style>
							</scale>
						</translate>
					</sequence>
					
					<sequence id="r" type="randmix" count="2" start="-5 -5 .2" end="7 0 1" seed="094858425">
						<translate offset="@r.x @r.y @r.z*12">
							<scale uniform="@anim_scale_bokehs3">
								<style alpha="@glowfunc(@r.x @r.y @t)">
									<rect bounds="-0.3 -0.3 0.3 0.3" texture="@texture_bk_rainbow" />
								</style>
							</scale>
						</translate>
					</sequence>
					
					<sequence id="r" type="randmix" count="2" start="-5 -5 .2" end="7 0 1" seed="238384829">
						<translate offset="@r.x @r.y @r.z*12">
							<scale uniform="@anim_scale_bokehs3">
								<style alpha="@glowfunc(@r.x @r.y @t)">
									<rect bounds="-0.3 -0.3 0.3 0.3" texture="@texture_bk_green" />
								</style>
							</scale>
						</translate>
					</sequence>															

					<sequence id="r" type="randmix" count="2" start="-5 -5 .2" end="7 0 1" seed="054687932">
						<translate offset="@r.x @r.y @r.z*12">
							<scale uniform="@anim_scale_bokehs1">
								<style alpha="@glowfuncb(@r.x @r.y @t)">
									<rect bounds="-0.3 -0.3 0.3 0.3" texture="@texture_bk_pink_yellow" />
								</style>
							</scale>
						</translate>
					</sequence>															

					<sequence id="r" type="randmix" count="2" start="-5 -5 .2" end="7 0 1" seed="785423547">
						<translate offset="@r.x @r.y @r.z*12">
							<scale uniform="@anim_scale_bokehs3">
								<style alpha="@glowfunc(@r.x @r.y @t)">
									<rect bounds="-0.3 -0.3 0.3 0.3" texture="@texture_bk_blue" />
								</style>
							</scale>
						</translate>
					</sequence>															

					<sequence id="r" type="randmix" count="3" start="-5 -5 .2" end="7 0 1" seed="78354547">
						<translate offset="@r.x @r.y @r.z*12">
							<scale uniform="@anim_scale_bokehs3">
								<style alpha="@glowfuncb(@r.x @r.y @t)">
									<rect bounds="-0.3 -0.3 0.3 0.3" texture="@texture_bk_pink_yellow" />
								</style>
							</scale>
						</translate>
					</sequence>															

					<sequence id="r" type="randmix" count="2" start="-5 -5 .2" end="7 0 1" seed="014698754">
						<translate offset="@r.x @r.y @r.z*12">
							<scale uniform="@anim_scale_bokehs3">
								<style alpha="@glowfuncb(@r.x @r.y @t)">
									<rect bounds="-0.3 -0.3 0.3 0.3" texture="@texture_bk_pink_yellow" />
								</style>
							</scale>
						</translate>
					</sequence>		
				</translate>
				</translate>
			</translate>
			</style>

		</scale>
	</projection>

</effect>
