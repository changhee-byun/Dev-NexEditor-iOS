<effect id="com.nexstreaming.kinemaster.builtin.title.manuscript" name="Manuscript" categorytitle="More Title Effects" type="title" icon="fx_text_manuscript.png" intimefirst="2000" intime="2000" outtime="2000" repeat="no" maxtitleduration="10000" >

	<userfield id="f_text" type="text">
		<fieldlabel locale="en" value="Title Text" />
	</userfield>

	<texture id="videoframe" video="1" />
	
	<texture id="title_text" text="%1" 
		typeface="asset:leaguescript.ttf" 
		textsize="200" 
		height="400"
		width="900"
		srcfield="@f_text"
		fillcolor="#000000" 
		shadowoffset="0 0" shadowradius="12" shadowcolor="0 0 0 0.75"
		textmargin="8"
		textalign="center"
		maxlines="4"
		fill="true" />
	
	<texture id="title_text_f" text="%f1" 
		typeface="asset:leaguescript.ttf" 
		textsize="110" 
		height="127"
		width="512"
		srcfield="@f_text"
		fillcolor="#FFFFFF" 
		shadowoffset="0 0" shadowradius="12" shadowcolor="0 0 0 0.75"
		textmargin="8"
		textalign="center"
		maxlines="1"
		fill="true" />
	
	<texture id="title_text_b" text="%f1" 
		typeface="asset:leaguescript.ttf" 
		textsize="110" 
		height="127"
		width="512"
		srcfield="@f_text"
		fillcolor="#FFFFFF" 
		shadowoffset="0 0" shadowradius="12" shadowcolor="0 0 0 0.75"
		textmargin="8"
		textalign="center"
		maxlines="1"
		fill="true" />
	
	<rect bounds="-1 1 1 -1" texture="@videoframe" />
	
	<animatedvalue id="fade">
		<part type="in"><keyframe value="0" /><keyframe value="1" /></part>
		<part type="mid"><keyframe value="1" /></part>
		<part type="out"><keyframe value="1" /><keyframe value="0" /></part>
	</animatedvalue>
	
	<animatedvalue id="t" scope="whole" timingfunction="linear">
		<keyframe value="0.2" />
		<keyframe value="0.4" />
	</animatedvalue>
	
	<function id="driftfunc" type="simplexpure" outputscale="550" />
	
	<projection type="perspective" aspect="1.77777" fov="45" top="1" near="1" far="40">
		<translate offset="0 0 -21.69">
			<scale uniform="0.025">
				<style alpha="@fade">
					<rect bounds="-640 -200 640 200" color="0.3 0.3 0.3 0.3" />
					
					<style dest="stencil">
						<rect bounds="-640 -200 640 200" color="#FFFFFF" />
					</style>
					
					<style rendertest="stencil">
						<sequence id="r" type="randmix" count="15" start="-660 -250 0.6 0.3" end="660 250 2.5 0.7" seed="725098">
							<translate offset="@driftfunc(@r.z @r.w @t) 0">
							<style alpha="@r.w">
								<rect location="@r.x @r.y" height="@r.z*120" width="@r.z*330" scalemode="fit" anchor="center" texture="@title_text_f" />
							</style>
							</translate>
						</sequence>
						<sequence id="r" type="randmix" count="18" start="-660 -250 0.6 0.3" end="660 250 2.5 0.7" seed="656342">
							<translate offset="@driftfunc(@r.z @r.w @t) 0">
							<style alpha="@r.w">
								<rect location="@r.x @r.y" height="@r.z*100" width="@r.z*300" scalemode="fit" anchor="center" texture="@title_text_b" />
							</style>
							</translate>
						</sequence>
					</style>
					
					<rect location="0 0" height="400" width="1200" scalemode="fit" anchor="center" texture="@title_text" />
					<rect location="2 0" height="400" width="1200" scalemode="fit" anchor="center" texture="@title_text" />
					<rect location="0 2" height="400" width="1200" scalemode="fit" anchor="center" texture="@title_text" />
					<rect location="2 2" height="400" width="1200" scalemode="fit" anchor="center" texture="@title_text" />
				</style>
			</scale>
		</translate>
	</projection>
	
</effect>
