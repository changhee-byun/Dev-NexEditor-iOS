<effect 
	id="com.nexstreaming.kinemaster.builtin2.transition.circlewipe" 
	name="Circle Wipe" 
	categorytitle="Fun Transitions" 
	type="transition" 
	minduration="500" maxduration="5000" effectoffset="100" effectoverlap="100" 
	icon="trans_circlewipe.png">


	<userfield id="f_dir" type="selection" default="1">
		<option value="1.5">
			<fieldlabel locale="en" value="Wipe in and out" />
		</option>
		<option value="2.5">
			<fieldlabel locale="en" value="Wipe inward" />
		</option>
		<option value="3.5">
			<fieldlabel locale="en" value="Wipe outward" />
		</option>
	</userfield>


    <texture id="video1" video="1" />
    <texture id="video2" video="2" />
    
    
    <animatedvalue id="in">
        <keyframe value="720" />
        <keyframe value="0" />
    </animatedvalue>

    <animatedvalue id="out">
        <keyframe value="0" />
        <keyframe value="720" />
    </animatedvalue>

    <animatedvalue id="r">
        <keyframe value="720" />
        <keyframe value="0" />
        <keyframe value="720" />
    </animatedvalue>
    <animatedvalue id="t">
        <keyframe value="0" />
        <keyframe value="1" />
    </animatedvalue>

    
    <visibility check="@f_dir" start="1.0" end="1.9">
    
		<projection type="perspective" fov="45" aspect="1.777777" near="0.01" far="60000">
			<translate offset="-640 -360 -870">
				<style dest="stencil">
					<circle center="640 360" radius="@r" />
				</style>
				<style rendertest="stencil">
					<visibility check="@t" start="0" end="0.5">
						<rect bounds="0 720 1280 0" texture="@video1" />
					</visibility>
					<visibility check="@t" start="0.5" end="1.0">
						<rect bounds="0 720 1280 0" texture="@video2" />
					</visibility>
				</style>
			</translate>
		</projection>
		
	</visibility>
	
    <visibility check="@f_dir" start="2.0" end="2.9">
    
		<projection type="perspective" fov="45" aspect="1.777777" near="0.01" far="60000">
			<translate offset="-640 -360 -870">
				<style dest="stencil">
					<circle center="640 360" radius="@in" />
				</style>
				<rect bounds="0 720 1280 0" texture="@video2" />
				<style rendertest="stencil">
					<rect bounds="0 720 1280 0" texture="@video1" />
				</style>
			</translate>
		</projection>
		
	</visibility>
	
    <visibility check="@f_dir" start="3.0" end="3.9">
    
		<projection type="perspective" fov="45" aspect="1.777777" near="0.01" far="60000">
			<translate offset="-640 -360 -870">
				<style dest="stencil">
					<circle center="640 360" radius="@out" />
				</style>
				<rect bounds="0 720 1280 0" texture="@video1" />
				<style rendertest="stencil">
					<rect bounds="0 720 1280 0" texture="@video2" />
				</style>
			</translate>
		</projection>
		
	</visibility>


</effect>


