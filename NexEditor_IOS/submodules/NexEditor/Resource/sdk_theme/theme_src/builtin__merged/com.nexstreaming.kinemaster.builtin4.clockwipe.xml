<effect
  id="com.nexstreaming.kinemaster.builtin4.clockwipe"
  type="transition"
  effectoffset="100"
  videooverlap="100"
  minduration="500"
  maxduration="10000"
  defaultduration="2000"
  categorytitle="Presentation"
  name="Clock Wipe"
  icon="clockwipe.png">
  
    <userfield id="f_clockdir" type="selection" default="1">
		<option value="1.5">
			<fieldlabel locale="en" value="Clockwise" />
		</option>
		<option value="2.5">
			<fieldlabel locale="en" value="Counter-clockwise" />
		</option>
	</userfield>

  
  <animatedvalue id="anim_angle" timingfunction="ease-in-out">
    <keyframe time="0.1" value="0" />
    <keyframe time="0.9" value="360" />
  </animatedvalue>
  <animatedvalue id="anim_angleccw" timingfunction="ease-in-out">
    <keyframe time="0.1" value="360" />
    <keyframe time="0.9" value="0" />
  </animatedvalue>
  <texture id="video1" video="1" />
  <texture id="video2" video="2" />
  <projection
    type="perspective"
    fov="45"
    aspect="1.777777"
    near="0.01"
    far="60000">
    <scale y="-1">
      <translate offset="-640 -360 -870">
      
      	<visibility check="@f_clockdir" start="1.0" end="1.9">

			<translate offset="640 360">
			  <rect bounds="-640 -360 640 360" texture="@video1" />
			</translate>

			<translate offset="640 360">
			  <rotate axis="0 0 1" angle="@anim_angle">
				<style dest="stencil">
					<rect bounds="-1206.500 -750.500 1206.500 0.500" color="1 0.392 0.196" />
				</style>
			  </rotate>
			</translate>
			
			<visibility check="@anim_angle" start="0" end="180">
				<translate offset="640 540.406">
					<style rendertest="stencil">
					  <trianglestrip texture="@video2">
						<point location="-640 180" texcoord="0 1.001" />
						<point location="640 180" texcoord="1 1.001" />
						<point location="-640 -180" texcoord="0 0.501" />
						<point location="640 -180" texcoord="1 0.501" />
					  </trianglestrip>
					</style>
				</translate>
			</visibility>
			
			<visibility check="@anim_angle" start="180" end="360">
				<translate offset="640 180.406">
					<style rendertest="stencil">
					  <trianglestrip texture="@video2">
						<point location="-640 180" texcoord="0 0.501" />
						<point location="640 180" texcoord="1 0.501" />
						<point location="-640 -180" texcoord="0 0.001" />
						<point location="640 -180" texcoord="1 0.001" />
					  </trianglestrip>
					</style>
				</translate>
				<translate offset="640 540.406">
				  <trianglestrip texture="@video2">
					<point location="-640 180" texcoord="0 1.001" />
					<point location="640 180" texcoord="1 1.001" />
					<point location="-640 -180" texcoord="0 0.501" />
					<point location="640 -180" texcoord="1 0.501" />
				  </trianglestrip>
				</translate>
			</visibility>
			
		</visibility>
        
      	<visibility check="@f_clockdir" start="2.0" end="2.9">

			<translate offset="640 360">
			  <rect bounds="-640 -360 640 360" texture="@video2" />
			</translate>

			<translate offset="640 360">
			  <rotate axis="0 0 1" angle="@anim_angleccw">
				<style dest="stencil">
					<rect bounds="-1206.500 -750.500 1206.500 0.500" color="1 0.392 0.196" />
				</style>
			  </rotate>
			</translate>
			
			<visibility check="@anim_angleccw" start="0" end="180">
				<translate offset="640 540.406">
					<style rendertest="stencil">
					  <trianglestrip texture="@video1">
						<point location="-640 180" texcoord="0 1.001" />
						<point location="640 180" texcoord="1 1.001" />
						<point location="-640 -180" texcoord="0 0.501" />
						<point location="640 -180" texcoord="1 0.501" />
					  </trianglestrip>
					</style>
				</translate>
			</visibility>
			
			<visibility check="@anim_angleccw" start="180" end="360">
				<translate offset="640 180.406">
					<style rendertest="stencil">
					  <trianglestrip texture="@video1">
						<point location="-640 180" texcoord="0 0.501" />
						<point location="640 180" texcoord="1 0.501" />
						<point location="-640 -180" texcoord="0 0.001" />
						<point location="640 -180" texcoord="1 0.001" />
					  </trianglestrip>
					</style>
				</translate>
				<translate offset="640 540.406">
				  <trianglestrip texture="@video1">
					<point location="-640 180" texcoord="0 1.001" />
					<point location="640 180" texcoord="1 1.001" />
					<point location="-640 -180" texcoord="0 0.501" />
					<point location="640 -180" texcoord="1 0.501" />
				  </trianglestrip>
				</translate>
			</visibility>
			
		</visibility>
        
      </translate>
    </scale>
  </projection>
</effect>