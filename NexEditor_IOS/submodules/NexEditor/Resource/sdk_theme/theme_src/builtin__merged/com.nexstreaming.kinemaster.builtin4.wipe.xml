<effect
  id="com.nexstreaming.kinemaster.builtin4.wipe"
  type="transition"
  effectoffset="100"
  videooverlap="100"
  minduration="500"
  maxduration="5000"
  defaultduration="2000"
  categorytitle="Presentation"
  name="Wipe"
  icon="wipe.png">
  
  <animatedvalue id="anim_left" timingfunction="linear">
    <keyframe time="0.1" value="1925.319 360" />
    <keyframe time="0.9" value="640 360" timingfunction="ease-in-out" />
  </animatedvalue>
  <animatedvalue id="anim_right" timingfunction="linear">
    <keyframe time="0.1" value="-645 360" />
    <keyframe time="0.9" value="640 360" timingfunction="ease-in-out" />
  </animatedvalue>
  <animatedvalue id="anim_up" timingfunction="linear">
    <keyframe time="0.1" value="640 -360" />
    <keyframe time="0.9" value="640 360" timingfunction="ease-in-out" />
  </animatedvalue>
  <animatedvalue id="anim_down" timingfunction="linear">
    <keyframe time="0.1" value="640 1080" />
    <keyframe time="0.9" value="640 360" timingfunction="ease-in-out" />
  </animatedvalue>
  <animatedvalue id="anim_in" timingfunction="linear">
    <keyframe time="0.1" value="1" />
    <keyframe time="0.9" value="0.001" timingfunction="ease-in-out" />
  </animatedvalue>
  <animatedvalue id="anim_out" timingfunction="linear">
    <keyframe time="0.1" value="0.001" />
    <keyframe time="0.9" value="1" timingfunction="ease-in-out" />
  </animatedvalue>
  
	<userfield id="f_wipedir" type="selection" default="5.5">
		<option value="5.5">
			<fieldlabel locale="en" value="Leftward" />
		</option>
		<option value="2.5">
			<fieldlabel locale="en" value="Rightward" />
		</option>
		<option value="4.5">
			<fieldlabel locale="en" value="Upward" />
		</option>
		<option value="3.5">
			<fieldlabel locale="en" value="Downward" />
		</option>
		<option value="1.5">
			<fieldlabel locale="en" value="Inward" />
		</option>
		<option value="6.5">
			<fieldlabel locale="en" value="Outward" />
		</option>
	</userfield>

  <texture id="video1" video="1" />
  <texture id="video2" video="2" />
  <projection
    type="perspective"
    fov="45"
    aspect="1.777777"
    near="0.01"
    far="60000">
    <scale y="-1">
      <translate offset="-640 -360 -870">
        <translate offset="640 360">
    		<visibility check="@f_wipedir" start="0.0" end="1.9">
          		<rect bounds="-640 -360 640 360" texture="@video2" />
          	</visibility>
    		<visibility check="@f_wipedir" start="2.0" end="100">
          		<rect bounds="-640 -360 640 360" texture="@video1" />
          	</visibility>
        </translate>
        <style dest="stencil">
    		<visibility check="@f_wipedir" start="5.0" end="5.9">
				<translate offset="@anim_left">
			  		<rect bounds="-640 -360 640 360" />
				</translate>
			</visibility>
    		<visibility check="@f_wipedir" start="2.0" end="2.9">
				<translate offset="@anim_right">
			  		<rect bounds="-640 -360 640 360" />
				</translate>
			</visibility>
    		<visibility check="@f_wipedir" start="3.0" end="3.9">
				<translate offset="@anim_up">
			  		<rect bounds="-640 -360 640 360" />
				</translate>
			</visibility>
    		<visibility check="@f_wipedir" start="4.0" end="4.9">
				<translate offset="@anim_down">
			  		<rect bounds="-640 -360 640 360" />
				</translate>
			</visibility>
    		<visibility check="@f_wipedir" start="1.0" end="1.9">
				<translate offset="640 360">
					<scale uniform="@anim_in">
						<rect bounds="-640 -360 640 360" />
					</scale>
				</translate>
			</visibility>
    		<visibility check="@f_wipedir" start="6.0" end="6.9">
				<translate offset="640 360">
					<scale uniform="@anim_out">
						<rect bounds="-640 -360 640 360" />
					</scale>
				</translate>
			</visibility>
        </style>
        <style rendertest="stencil">
			<translate offset="640 360">
				<visibility check="@f_wipedir" start="0.0" end="1.9">
					<rect bounds="-640 -360 640 360" texture="@video1" />
				</visibility>
				<visibility check="@f_wipedir" start="2.0" end="100">
					<rect bounds="-640 -360 640 360" texture="@video2" />
				</visibility>
			</translate>
        </style>
      </translate>
    </scale>
  </projection>
</effect>