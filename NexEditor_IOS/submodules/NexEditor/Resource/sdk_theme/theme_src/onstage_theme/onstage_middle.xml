<effect 
	id="com.nexstreaming.kinemaster.onstage.middle" 
	name="On-Stage Middle"
	icon="theme_middle.png"
	theme="true"
	type="title" 
	intime="1500" 
	intimefirst="0" 
	outtime="1000" 
	outtimelast="0">

	<texture id="videoframe" video="1" />
	<texture id="starglow" src="star.png" />
	
	<userfield id="f_text" type="text">
		<fieldlabel locale="en" value="Title Text" />
	</userfield>
	<texture id="title_text" text="%1" 
		srcfield="@f_text"
		typeface="asset:bevan.ttf" 
		textsize="127" 
		height="127"
		width="1100"
		fillcolor="#dcb11e" 
		shadowoffset="2 2" shadowradius="8" shadowcolor="0 0 0 0.8"
		textmargin="8"
		textalign="left"
		maxlines="1"
		fill="true" shadow="true" />
					
	<animatedvalue id="slide_t">
		<part type="in">
			<keyframe value="0.8" />
			<keyframe value="0.6" />
		</part>
		<part type="mid">
			<keyframe value="0.6" />
		</part>
		<part type="out">
			<keyframe value="0.6" />
			<keyframe value="0.8" />
		</part>
	</animatedvalue>
	
	<animatedvalue id="slide_b">
		<part type="in">
			<keyframe value="-0.4" />
			<keyframe value="-0" />
		</part>
		<part type="mid">
			<keyframe value="-0" />
		</part>
		<part type="out">
			<keyframe value="-0" />
			<keyframe value="-0.4" />
		</part>
	</animatedvalue>
	
	<animatedvalue id="t" scope="whole" timingfunction="linear">
		<keyframe value="0" />
		<keyframe value="8" />
	</animatedvalue>
	
	<function id="swingfuncb" type="simplexpure" inputscale="1 1 0.18" inputbias="20 50 44" outputscale="30" />
	<function id="glowfunc" type="simplexfractal" outputbias="0.5" outputscale="0.5" octaves="4" />
	
	<rect bounds="-1 1 1 -1" texture="@videoframe" />
	<translate offset="0 @slide_b">
		<rect bounds="-1 -1 1 -0.6" color="0 0 0 0.9" />
		<style alpha="0.3">
			<translate textureoffset="0 @slide_t"><scale x="1" y="0.2" type="texture">
				<rect bounds="-1 -1 1 -0.6" texture="@videoframe" />
			</scale></translate>
		</style>
	</translate>
	
	<projection type="perspective" aspect="1.77777" fov="45" top="1" near="1" far="40">
		<translate offset="0 0 -21.69">

			<translate offset="0 @slide_b*18">
				<translate offset="0 -9">
				<sequence id="s" type="linear" count="2" start="1 1" end="-1 0.3"> <scale x="1" y="@s.x"> <style alpha="@s.y">
					
						<sequence id="r" type="randmix" count="12" start="-19 1 -6 1.5" end="19 1.4 -12 1.5" seed="3472">
							<translate offset="@r.x @r.y @r.z">
									
								<rotate axis="0 1 0" angle="@swingfuncb(@r.x @r.y @t)">
									<style alpha="@glowfunc(@r.x @r.y @t)">
										<rect bounds="@r.w*-1 @r.w @r.w @r.w*-1" texture="@starglow" />
									</style>
								</rotate>
								
							</translate>
						</sequence>
	
				</style> </scale> </sequence>
				</translate>
			</translate>
		
			<translate offset="0 @slide_b*8.5">
		
				<translate offset="0 -5.05 6">
					<sequence id="s" type="linear" count="2" start="1 1" end="-1 0.3"> <scale x="1" y="@s.x"> <style alpha="@s.y">
						<rect location="-9.8 0" height="9.5" width="14" anchor="bottom left" scalemode="fit" texture="@title_text" />
					</style> </scale> </sequence>
				</translate>
			</translate>
		
			<translate offset="0 @slide_b*18">
				<translate offset="0 -9">
				<sequence id="s" type="linear" count="2" start="1 1" end="-1 0.3"> <scale x="1" y="@s.x"> <style alpha="@s.y">
					
						<sequence id="r" type="randmix" count="5" start="-19 1 1 1.5" end="19 1.4 -5 1.5" seed="563478">
							<translate offset="@r.x @r.y @r.z">
									
								<rotate axis="0 1 0" angle="@swingfuncb(@r.x @r.y @t)">
									<style alpha="@glowfunc(@r.x @r.y @t)">
										<rect bounds="@r.w*-1 @r.w @r.w @r.w*-1" texture="@starglow" />
									</style>
								</rotate>
								
							</translate>
						</sequence>
	
				</style> </scale> </sequence>
				</translate>
			</translate>
		
		</translate>
	</projection>

</effect>