<effect 
	id="com.nexstreaming.kinemaster.serene.ending" 
	name="Serene Ending"
	icon="theme_ending.png"
	theme="true"
	type="title" 
	intime="2000" 
	intimefirst="2000" 
	outtime="2000" 
	outtimelast="2000"
	cycletime="2000"  repeat="yes">

	<texture id="videoframe" video="1" />
	<userfield id="f_text" type="text">
		<fieldlabel locale="en" value="Title Text" />
	</userfield>
	<texture id="title_text" text="%1" 
		srcfield="@f_text"
		typeface="asset:junction.ttf" 
		textsize="95" 
		textalign="left"
		fillcolor="0.05 0.1 0.2 0.9" 
		width="600"
		fill="true" />
	
	
	<texture id="bp4" src="blurpaper4.png" />
	<texture id="ltblur" src="ltblur.png" />
	<texture id="maskright" src="maskright.png" />
		
	<rect bounds="-1 1 1 -1" texture="@videoframe" />
	
	<animatedvalue id="slide_in" >
		<keyframe value="-5 -1 -2" />
		<keyframe value="0 0 0" />
	</animatedvalue>
	
	<animatedvalue id="slide_out" >
		<keyframe value="0 0 0" />
		<keyframe value="0 0 -2" />
	</animatedvalue>
	
	<animatedvalue id="fade_in" >
		<keyframe value="0" />
		<keyframe value="1" />
	</animatedvalue>
	
	<animatedvalue id="fade_out" >
		<keyframe value="1" />
		<keyframe value="0" />
	</animatedvalue>
		
	<animatedvalue id="bgspin" timingfunction="linear" scope="whole" >
		<keyframe value="-30" />
		<keyframe value="30" />
	</animatedvalue>
	
	
	<animatedvalue id="slide" timingfunction="linear" >
		<keyframe value="-4" />
		<keyframe value="0" />
	</animatedvalue>
	
	<part type="in">
		<style alpha="@fade_in*0.5">
			<rect bounds="-1 -1 1 1" color="0.74 0.86 0.85 1" />
		</style>
	</part>
	<part type="mid">
		<style alpha="0.5">
			<rect bounds="-1 -1 1 1" color="0.74 0.86 0.85 1" />
		</style>
	</part>
	<part type="out">
		<style alpha="@fade_out*0.5">
			<rect bounds="-1 -1 1 1" color="0.74 0.86 0.85 1" />
		</style>
	</part>
	
	<projection type="perspective" aspect="1.77777" fov="45" top="1" near="1" far="30">
		<translate offset="@slide 0 -16.14"><rotate axis="0 1 0" angle="0">
			
			
			<translate offset="4 0 0" repeat="4">
			<sequence id="r" type="randmix" count="30" start="0 -2.5 1 0" end="4 4 0.3 360" seed="73985338">
				<translate offset="@r.x @r.y @r.z*12"><style alpha="@r.z">
					<rotate axis="0 1 0" angle="@bgspin">
						<part type="in"><style alpha="@fade_in"><rotate axis="0 1 0" angle="@r.w"><rect bounds="-0.85 0.5 0.85 -0.5" texture="@bp4" /></rotate></style></part>
						<part type="mid"><rotate axis="0 1 0" angle="@r.w"><rect bounds="-0.85 0.5 0.85 -0.5" texture="@bp4" /></rotate></part>
						<part type="out"><style alpha="@fade_out"><rotate axis="0 1 0" angle="@r.w"><rect bounds="-0.85 0.5 0.85 -0.5" texture="@bp4" /></rotate></style></part>
					</rotate>
				</style></translate>
			</sequence>
			</translate>
							
		</rotate></translate>
	</projection>
	
	<animatedvalue id="text_slide_in" >
		<keyframe value="2" />
		<keyframe value="0" />
	</animatedvalue>
	
	<animatedvalue id="text_slide_out" >
		<keyframe value="0" />
		<keyframe value="-2" />
	</animatedvalue>
	
	
	<trianglestrip texture="@videoframe" mask="@maskright">
		<point location="-1 -1" texcoord="0 1" maskcoord="0 0" />
		<point location=" 1 -1" texcoord="1 1" maskcoord="0.8	 0" />
		<point location="-1  1" texcoord="0 0" maskcoord="0 1" />
		<point location=" 1  1" texcoord="1 0" maskcoord="0.8 1" />
	</trianglestrip>

	<projection type="perspective" aspect="1.77777" fov="45" top="1" near="1" far="30">
		<translate offset="0 0 -10">
			<part type="in">
				<translate offset="0 0 @text_slide_in">
				<style alpha="@fade_in">
					<rect location="7 -3.9" width="5" anchor="right bottom" texture="@title_text" />
				</style>
				</translate>
			</part>
			<part type="mid">
				<rect location="7 -3.9" width="5" anchor="right bottom" texture="@title_text" />
			</part>
			<part type="out">
				<translate offset="0 0 @text_slide_out">
				<style alpha="@fade_out">
					<rect location="7 -3.9" width="5" anchor="right bottom" texture="@title_text" />
				</style>
				</translate>
			</part>
		</translate>
	</projection>
	
	
</effect>