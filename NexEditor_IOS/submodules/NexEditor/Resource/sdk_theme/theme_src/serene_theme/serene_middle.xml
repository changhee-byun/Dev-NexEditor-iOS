<effect 
	id="com.nexstreaming.kinemaster.serene.middle" 
	name="Serene Middle"
	icon="theme_middle.png"
	theme="true"
	type="title" 
	intime="2000" 
	intimefirst="2000" 
	outtime="2000" 
	outtimelast="2000"
	cycletime="2000"  repeat="yes">

	<texture id="videoframe" video="1" />
	<userfield id="f_text" type="text">
		<fieldlabel locale="en" value="Title Text" />
	</userfield>
	<texture id="title_text" text="%1" 
		srcfield="@f_text"
		typeface="asset:junction.ttf" 
		textsize="70" 
		textalign="left"
		fillcolor="0.05 0.1 0.2 0.9" 
		width="1200"
		fill="true" />
	
	<texture id="bp4" src="blurpaper4.png" />
	<texture id="ltblur" src="ltblur.png" />
		
	<rect bounds="-1 1 1 -1" texture="@videoframe" />
	
	<animatedvalue id="slide_in" >
		<keyframe value="-5 -1 -2" />
		<keyframe value="0 0 0" />
	</animatedvalue>
	
	<animatedvalue id="slide_out" >
		<keyframe value="0 0 0" />
		<keyframe value="0 0 -2" />
	</animatedvalue>
	
	<animatedvalue id="fade_in" >
		<keyframe value="0" />
		<keyframe value="1" />
	</animatedvalue>
	
	<animatedvalue id="fade_out" >
		<keyframe value="1" />
		<keyframe value="0" />
	</animatedvalue>
	
	<projection type="perspective" aspect="1.77777" fov="45" top="1" near="1" far="30">
	
		<part type="in">
			<style alpha="@fade_in">
			<translate offset="@slide_in"><translate offset="-5 -4 -16">
				<!--<sequence id="r" type="randmix" count="90" start="-4 -1 0.7 0" end="12 2 0.2 15" seed="47985357">
					<translate offset="@r.x @r.y @r.z*8"><style alpha="@r.z">
						<rotate axis="0 1 0" angle="@r.w"><rect bounds="-1 -1 1 1" texture="@ltblur" /></rotate>
					</style></translate>
				</sequence>-->
				<translate offset="-4 -1"><scale x="16" y="3">
				<translate offset="0" repeat="2">
				<trianglestrip type="fan">
					<point location="-1 -1" color="@fade_in*0.74 @fade_in*0.86 @fade_in*0.85 @fade_in" />
					<point location="2.5 -1" color="0 0 0 0" />
					<point location="1.5 1" color="0 0 0 0" />
					<point location="-1 1.3" color="0 0 0 0" />
				</trianglestrip>
				</translate>
				</scale></translate>
			</translate></translate>
			</style>
		</part>
		
		<part type="mid">
			<translate offset="-5 -4 -16">
				<!--<sequence id="r" type="randmix" count="90" start="-4 -1 0.7 0" end="12 2 0.2 15" seed="47985357">
					<translate offset="@r.x @r.y @r.z*8"><style alpha="@r.z">
						<rotate axis="0 1 0" angle="@r.w"><rect bounds="-1 -1 1 1" texture="@ltblur" /></rotate>
					</style></translate>
				</sequence>-->
				<translate offset="-4 -1"><scale x="16" y="3">
				<translate offset="0" repeat="2">
				<trianglestrip type="fan">
					<point location="-1 -1" color="0.74 0.86 0.85 1" />
					<point location="2.5 -1" color="0 0 0 0" />
					<point location="1.5 1" color="0 0 0 0" />
					<point location="-1 1.3" color="0 0 0 0" />
				</trianglestrip>
				</translate>
				</scale></translate>
			</translate>
		</part>
		
		<part type="out">
			<style alpha="@fade_out">
			<translate offset="@slide_out"><translate offset="-5 -4 -16">
				<!--<sequence id="r" type="randmix" count="90" start="-4 -1 0.7 0" end="12 2 0.2 15" seed="47985357">
					<translate offset="@r.x @r.y @r.z*8"><style alpha="@r.z">
						<rotate axis="0 1 0" angle="@r.w"><rect bounds="-1 -1 1 1" texture="@ltblur" /></rotate>
					</style></translate>
				</sequence>-->
				<translate offset="-4 -1"><scale x="16" y="3">
				<translate offset="0" repeat="2">
				<trianglestrip type="fan">
					<point location="-1 -1" color="@fade_out*0.74 @fade_out*0.86 @fade_out*0.85 @fade_out" />
					<point location="2.5 -1" color="0 0 0 0" />
					<point location="1.5 1" color="0 0 0 0" />
					<point location="-1 1.3" color="0 0 0 0" />
				</trianglestrip>
				</translate>
				</scale></translate>
			</translate></translate>
			</style>
		</part>
		
	</projection>
	
	
		
	<animatedvalue id="bgspin" timingfunction="linear" scope="whole" >
		<keyframe value="-30" />
		<keyframe value="30" />
	</animatedvalue>
	
	
	<animatedvalue id="slide" timingfunction="linear" >
		<keyframe value="-10" />
		<keyframe value="-5" />
	</animatedvalue>
	
	<projection type="perspective" aspect="1.77777" fov="45" top="1" near="1" far="30">
		<translate offset="@slide 0 -16.14"><rotate axis="0 1 0" angle="0">
			
			<translate offset="5 0 0" repeat="4">
			<sequence id="r" type="randmix" count="25" start="-5 -5 1 0" end="5 -1 0.3 360" seed="42985357">
				<translate offset="@r.x @r.y @r.z*15"><style alpha="@r.z">
					<rotate axis="0 1 0" angle="@bgspin">
						<part type="in"><style alpha="@fade_in"><rotate axis="0 1 0" angle="@r.w"><rect bounds="-0.85 0.5 0.85 -0.5" texture="@bp4" /></rotate></style></part>
						<part type="mid"><rotate axis="0 1 0" angle="@r.w"><rect bounds="-0.85 0.5 0.85 -0.5" texture="@bp4" /></rotate></part>
						<part type="out"><style alpha="@fade_out"><rotate axis="0 1 0" angle="@r.w"><rect bounds="-0.85 0.5 0.85 -0.5" texture="@bp4" /></rotate></style></part>
					</rotate>
				</style></translate>
			</sequence>
			</translate>
							
		</rotate></translate>
	</projection>
	
	<animatedvalue id="text_slide_in" >
		<keyframe value="2" />
		<keyframe value="0" />
	</animatedvalue>
	
	<animatedvalue id="text_slide_out" >
		<keyframe value="0" />
		<keyframe value="-2" />
	</animatedvalue>
	
	
	<projection type="perspective" aspect="1.77777" fov="45" top="1" near="1" far="30">
		<translate offset="0 0 -10">
			<part type="in">
				<translate offset="0 0 @text_slide_in">
				<style alpha="@fade_in">
					<rect location="-7 -3.9" height="1.4" anchor="left bottom" texture="@title_text" />
				</style>
				</translate>
			</part>
			<part type="mid">
				<rect location="-7 -3.9" height="1.4" anchor="left bottom" texture="@title_text" />
			</part>
			<part type="out">
				<translate offset="0 0 @text_slide_out">
				<style alpha="@fade_out">
					<rect location="-7 -3.9" height="1.4" anchor="left bottom" texture="@title_text" />
				</style>
				</translate>
			</part>
		</translate>
	</projection>
	
</effect>